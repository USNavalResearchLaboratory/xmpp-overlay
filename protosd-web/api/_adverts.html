<h1>Service Advertisements using the Web API</h1>


<p>Services can be advertised using one of its underlying bindings to JmDNS or INDI by posting
    a service description. This section provides details on how to accomplish this. The base
    URL is the same as the service discovery:</p>

<div class="blackbox">
    http://localhost/api/services
</div>
<br>
<p> But for creation, service descriptions are PUSH'ed rather than retrieved using GET.</p>

<h2>1. Advertise a service</h2>
<div class="rounded nicebox" style="width: 900px;">
    <div class="floatleft blackbox">
        Command: <br>
        Parameters:<br>
        Verb: <br>
        Consumes: <br>
        Produces:<br>
    </div>

    <div class="floatleft blackbox">
        api/services/create<br>
        {id} <br>
        POST  <br>
        application/json, application/xml<br>
        application/json, application/xml<br>
    </div>

    <div class="verticalspace"></div>

    <div class="floatleft whitebox" style="width: 430px">
        The services "create" command creates a service description and advertises using the
        specification provided in the payload of the message.  The service details
        are specified using either JSON or XML.
        <br>
        <br>

    </div>
    <div class="clear"></div>
</div>
<br>

<p> A service can be created by sending (POSTing) an XML or JSON payload
    to the "create" URL. The message contains the standard specification of an
    mDNS advert, which are:

    <ol>
        <li><b>ProtoSD ID:</b> the ID of the discovery system used to advertise this service (can be blank)</li>
        <li><b>Service ID:</b> the id of the service (should be left blank for auto assignment)</li>
        <li><b>Service Name:</b> the name of the service</li>
        <li><b>Service Type:</b> the mDNS type for the service</li>
        <li><b>Service Domain:</b> the domain for the service</li>
        <li><b>Service Address:</b> the address that the service can be located at (can be blank)</li>
        <li><b>Service Port:</b> the ip port that the service is located at</li>
        <li><b>TXT:</b> the TXT field contains a list of key/value pairs to advertise further metadata
            about the service.</li>
    </ol>


    <p>An example in XML of a generic printer service that advertises its state (eg. pagesm, ink, etc)
        could be:

        <pre class="brush: xml;">
<ServiceInfoEndpoint>
    <protosdID>1</protosdID>
    <serviceID>38</serviceID>
    <hostID>ians-air-2.local</hostID>
    <name>Printer</name>
    <type>_http._tcp</type>
    <domain>local._tcp.local</domain>
    <address>192.168.1.104</address>
    <port>8888</port>
    <txt>
        <entry>
            <key>PSID</key>
            <value>29</value>
        </entry>
        <entry>
            <key>pages_left</key>
            <value>78</value>
        </entry>
        <entry>
            <key>paper</key>
            <value>low</value>
        </entry>
        <entry>
            <key>DiscoverySystem</key>
            <value>JmDNS</value>
        </entry>
        <entry>
            <key>ink</key>
            <value>high</value>
        </entry>
    </txt>
</ServiceInfoEndpoint>
</pre>

    <p>And the same example in JSON would be:</p>

<pre class="brush: jscript;">
{
    "ServiceInfoEndpoint":{
        "protosdID":"1",
        "serviceID":"12",
        "hostID":"ians-air-2.local",
        "name":"Printer",
        "type":"_http._tcp\n\t",
        "domain":"\n\t\tlocal._tcp.local",
        "address":"192.168.1.104",
        "port":"8888",
        "txt":{
            "entry":[
                {"key":"PSID",
                "value":"29"},
                {"key":"pages_left",
                "value":"78"},
                {"key":"paper",
                "value":"low"},
                {"key":"DiscoverySystem",
                "value":"JmDNS"},
                {"key":"ink",
                "value":"high"}
        ]}
    }
 }
</pre>


